! function (h) {
    "use strict";
    var e = {
            width: 0,
            height: 0,
            selector: ".item-point",
            styleSelector: "circle",
            animationSelector: "",
            animationPopoverIn: "",
            animationPopoverOut: "",
            onInit: null,
            getSelectorElement: null,
            getValueRemove: null
        },
        n = {
            settings: null,
            init: function (t, s) {
                this.settings = h.extend(e, s), this.event(t), n.layout(t), h(window).on("load", function () {
                    n.layout(t)
                }), h(t).find(".target").on("load", function () {
                    n.layout(t)
                }), h(window).on("resize", function () {
                    n.layout(t)
                })
            },
            event: function (i) {
                this.settings.styleSelector && h(this.settings.selector).addClass(this.settings.styleSelector), this.settings.animationSelector && ("marker" == this.settings.animationSelector ? (h(this.settings.selector).addClass(this.settings.animationSelector), h(this.settings.selector).append('<div class="pin"></div>'), h(this.settings.selector).append('<div class="pulse"></div>')) : h(this.settings.selector).addClass(this.settings.animationSelector)), h.isFunction(this.settings.onInit) && this.settings.onInit(), h(i).find(".content").addClass("animated"), h(this.settings.selector).wrapAll("<div class='wrap-selector' />"), h(this.settings.selector).each(function () {
                    h(".toggle", this).on("click", function (t) {
                        t.preventDefault(), h(this).closest(n.settings.selector).toggleClass("active");
                        var s = h(this).closest(n.settings.selector).data("popover"),
                            e = h(s);
                        h(this).closest(n.settings.selector).hasClass("active") && !h(this).closest(n.settings.selector).hasClass("disabled") ? (h.isFunction(n.settings.getSelectorElement) && n.settings.getSelectorElement(h(this).closest(n.settings.selector)), e.fadeIn(), n.layout(i), e.removeClass(n.settings.animationPopoverOut), e.addClass(n.settings.animationPopoverIn)) : (h.isFunction(n.settings.getValueRemove) && n.settings.getValueRemove(h(this).closest(n.settings.selector)), e.removeClass(n.settings.animationPopoverIn), e.addClass(n.settings.animationPopoverOut), e.delay(0).fadeOut())
                    });
                    var s = h(this).data("popover"),
                        e = h(s);
                    e.find(".exit").on("click", function (t) {
                        t.preventDefault(), h('[data-popover="' + s + '"]').removeClass("active"), e.removeClass(n.settings.animationPopoverIn), e.addClass(n.settings.animationPopoverOut), e.delay(0).fadeOut()
                    })
                })
            },
            layout: function (t) {
                var s = t.find(".target")[0],
                    l = s.naturalWidth,
                    e = s.naturalHeight,
                    c = h(t).width() / l * 100,
                    i = e * c / 100;
                h(t).css("height", i), h(window).width() < l ? h(t).stop().css("width", "100%") : h(t).stop().css("width", l), h(this.settings.selector).each(function () {
                    if (h(window).width() < l) var t = h(this).data("top") * c / 100,
                        s = h(this).data("left") * c / 100;
                    else t = h(this).data("top"), s = h(this).data("left");
                    h(this).css("top", t + "px"), h(this).css("left", s + "px");
                    var e = h(this).data("popover"),
                        i = h(e).find(".head").outerHeight() + h(e).find(".body").outerHeight() + h(e).find(".footer").outerHeight();
                    if (h(e).css("left", s + "px"), h(e).css("height", i + "px"), h(e).hasClass("bottom")) {
                        var n = t - h(e).outerHeight();
                        h(e).css("top", n + "px")
                    } else if (h(e).hasClass("center")) {
                        n = t - .5 * h(e).outerHeight();
                        h(e).css("top", n + "px")
                    } else h(e).css("top", t + "px");
                    if (h(".toggle", this).css("width", h(this).outerWidth()), h(".toggle", this).css("height", h(this).outerHeight()), h(this).find(".pin")) {
                        var o = h(".pin", this).outerWidth(),
                            a = h(".pin", this).outerHeight();
                        h(".toggle", this).css("width", o), h(".toggle", this).css("height", a)
                    }
                })
            }
        };
    h.fn.scalize = function (t) {
        return n.init(this, t)
    }
}(jQuery);